

<!doctype html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Working with horizons &#8212; kuibit 1.4.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/bizstyle.css" />
    <link rel="stylesheet" type="text/css" href="_static/css/custom.css" />
    
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="_static/bizstyle.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Gravitational waves" href="cactus_waves.html" />
    <link rel="prev" title="Working with multipolar decompositions" href="cactus_multipoles.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <!--[if lt IE 9]>
    <script src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="cactus_waves.html" title="Gravitational waves"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="cactus_multipoles.html" title="Working with multipolar decompositions"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">kuibit 1.4.0 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Working with horizons</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="working-with-horizons">
<h1>Working with horizons<a class="headerlink" href="#working-with-horizons" title="Permalink to this heading">¶</a></h1>
<p>The module <code class="xref py py-mod docutils literal notranslate"><span class="pre">cactus_horizon</span></code> (<a class="reference internal" href="cactus_horizons_ref.html#module-kuibit.cactus_horizons"><span class="std std-ref">Reference on kuibit.cactus_horizons</span></a>) can read output data produced by <code class="docutils literal notranslate"><span class="pre">AHFinderDirect</span></code>
and <code class="docutils literal notranslate"><span class="pre">QuasiLocalMeasures</span></code>.</p>
<p>The simplest way to access horizon data is via <a class="reference internal" href="simdir_ref.html#kuibit.simdir.SimDir" title="kuibit.simdir.SimDir"><code class="xref py py-class docutils literal notranslate"><span class="pre">SimDir</span></code></a> with the
attribute <a class="reference internal" href="simdir_ref.html#kuibit.simdir.SimDir.horizons" title="kuibit.simdir.SimDir.horizons"><code class="xref py py-meth docutils literal notranslate"><span class="pre">horizons()</span></code></a>, which returns an object of type
<a class="reference internal" href="cactus_horizons_ref.html#kuibit.cactus_horizons.HorizonsDir" title="kuibit.cactus_horizons.HorizonsDir"><code class="xref py py-class docutils literal notranslate"><span class="pre">HorizonsDir</span></code></a>. <a class="reference internal" href="cactus_horizons_ref.html#kuibit.cactus_horizons.HorizonsDir" title="kuibit.cactus_horizons.HorizonsDir"><code class="xref py py-class docutils literal notranslate"><span class="pre">HorizonsDir</span></code></a> collects all the
information available from the <code class="docutils literal notranslate"><span class="pre">AHFinderDirect</span></code> and <code class="docutils literal notranslate"><span class="pre">QuasiLocalMeasures</span></code>
thorns, including the shape of the horizons.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">AHFinderDirect</span></code> and <code class="docutils literal notranslate"><span class="pre">QuasiLocalMeasures</span></code> use different indexing systems.
At the moment, <code class="docutils literal notranslate"><span class="pre">kuibit</span></code> cannot connect the two automatically, so an
horizon is identified by both the numbers.</p>
</div>
<p>To access horizon information, use the bracket notation, for example, if <code class="docutils literal notranslate"><span class="pre">sim</span></code>
is a <a class="reference internal" href="simdir_ref.html#kuibit.simdir.SimDir" title="kuibit.simdir.SimDir"><code class="xref py py-class docutils literal notranslate"><span class="pre">SimDir</span></code></a>, <code class="docutils literal notranslate"><span class="pre">sim.horizons[0,</span> <span class="pre">1]</span></code> will return the horizon with
QLM index 0 and AH index 1. The result of this operation is a
<a class="reference internal" href="cactus_horizons_ref.html#kuibit.cactus_horizons.OneHorizon" title="kuibit.cactus_horizons.OneHorizon"><code class="xref py py-class docutils literal notranslate"><span class="pre">OneHorizon</span></code></a> object. This contains all the variables from both
<code class="docutils literal notranslate"><span class="pre">QuasiLocalMeasures</span></code> and <code class="docutils literal notranslate"><span class="pre">AHFinderDirect</span></code> (the <code class="docutils literal notranslate"><span class="pre">BHdiagnostics</span></code> files) as
<a class="reference internal" href="timeseries_ref.html#kuibit.timeseries.TimeSeries" title="kuibit.timeseries.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>. To access the QLM variables, you canuse the bracket
notation (e.g., <code class="docutils literal notranslate"><span class="pre">hor['mass']</span></code>), to access the AH ones you can access them via
the <code class="docutils literal notranslate"><span class="pre">ah</span></code> attribute (e.g., <code class="docutils literal notranslate"><span class="pre">hor.ah.area</span></code>, or <code class="docutils literal notranslate"><span class="pre">hor.ah['area']</span></code>).</p>
<p>If you only need (or have) one of the two, you can access the relevant
information with <a class="reference internal" href="cactus_horizons_ref.html#kuibit.cactus_horizons.HorizonsDir.get_apparent_horizon" title="kuibit.cactus_horizons.HorizonsDir.get_apparent_horizon"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_apparent_horizon()</span></code></a> or
<a class="reference internal" href="cactus_horizons_ref.html#kuibit.cactus_horizons.HorizonsDir.get_qlm_horizon" title="kuibit.cactus_horizons.HorizonsDir.get_qlm_horizon"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_qlm_horizon()</span></code></a>.</p>
<p>You can access the shape of an horizon from <a class="reference internal" href="cactus_horizons_ref.html#kuibit.cactus_horizons.OneHorizon" title="kuibit.cactus_horizons.OneHorizon"><code class="xref py py-class docutils literal notranslate"><span class="pre">OneHorizon</span></code></a> with the
the method <a class="reference internal" href="cactus_horizons_ref.html#kuibit.cactus_horizons.OneHorizon.shape_at_iteration" title="kuibit.cactus_horizons.OneHorizon.shape_at_iteration"><code class="xref py py-meth docutils literal notranslate"><span class="pre">shape_at_iteration()</span></code></a>. This returns three lists of
with the various 3D patches that form each horizon. In case you are only
interested in a project of the shape on a 2D plane or 1D axis, you
can use <a class="reference internal" href="cactus_horizons_ref.html#kuibit.cactus_horizons.OneHorizon.shape_outline_at_iteration" title="kuibit.cactus_horizons.OneHorizon.shape_outline_at_iteration"><code class="xref py py-meth docutils literal notranslate"><span class="pre">shape_outline_at_iteration()</span></code></a> and specify the <code class="docutils literal notranslate"><span class="pre">cut</span></code>.
For example, if you want to look at the equatiorial plane, you would
set <code class="docutils literal notranslate"><span class="pre">cut=(None,</span> <span class="pre">None,</span> <span class="pre">0)</span></code>.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>No interpolation is performed, so results are not accurate when the cut
is not along one of the major directions centered in the origin of the
horizon.</p>
</div>
<section id="vt-data">
<h2>VT data<a class="headerlink" href="#vt-data" title="Permalink to this heading">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">QuasiLocalMeasures</span></code> can optionally output <code class="docutils literal notranslate"><span class="pre">.vtk</span></code> files which contain the
horizon mesh and some internal variables defined on such meshes (when the option
<code class="docutils literal notranslate"><span class="pre">QuasiLocalMeasures::output_vtk_every</span></code> is positive). <code class="docutils literal notranslate"><span class="pre">kuibit</span></code> can parse
these files and represent variables defined on the horizons. The attribute
<a class="reference internal" href="cactus_horizons_ref.html#kuibit.cactus_horizons.OneHorizon.vtk_available_iterations" title="kuibit.cactus_horizons.OneHorizon.vtk_available_iterations"><code class="xref py py-meth docutils literal notranslate"><span class="pre">vtk_available_iterations()</span></code></a> returns a list with the iterations at
which VTK data is available and the method
<a class="reference internal" href="cactus_horizons_ref.html#kuibit.cactus_horizons.OneHorizon.available_vtk_variables_at_iteration" title="kuibit.cactus_horizons.OneHorizon.available_vtk_variables_at_iteration"><code class="xref py py-meth docutils literal notranslate"><span class="pre">available_vtk_variables_at_iteration()</span></code></a> returns a list with which
variables are available at the given iteration.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>As a design choice, <code class="docutils literal notranslate"><span class="pre">.vtk</span></code> parsing in <code class="docutils literal notranslate"><span class="pre">kuibit</span></code> was developed with
flexibility as opposed to speed. <code class="docutils literal notranslate"><span class="pre">kuibit</span></code> will always scan all the various
files without assuming much about them. <code class="docutils literal notranslate"><span class="pre">.vtk</span></code> can be large, so if this turns
out to be a performance bottleneck, please open an issue on the bug tracker.</p>
</div>
<p>You can access the variables with the methods <a class="reference internal" href="cactus_horizons_ref.html#kuibit.cactus_horizons.OneHorizon.vtk_at_iteration" title="kuibit.cactus_horizons.OneHorizon.vtk_at_iteration"><code class="xref py py-meth docutils literal notranslate"><span class="pre">vtk_at_iteration()</span></code></a>, which
returns a dictionary-like object with all the variables at the given iteration, or
with <a class="reference internal" href="cactus_horizons_ref.html#kuibit.cactus_horizons.OneHorizon.vtk_variable_at_iteration" title="kuibit.cactus_horizons.OneHorizon.vtk_variable_at_iteration"><code class="xref py py-meth docutils literal notranslate"><span class="pre">vtk_variable_at_iteration()</span></code></a>, which returns a specific variable.</p>
<p>There are two special variables, <code class="docutils literal notranslate"><span class="pre">coordinates</span></code>, which is a list of the 3D
coordinates of each vertex that form the horizon mesh, and <code class="docutils literal notranslate"><span class="pre">connectivity</span></code>,
which describes the faces of the horizon. The <code class="docutils literal notranslate"><span class="pre">connectivity</span></code> list is formed by
NumPy arrays of the form <code class="docutils literal notranslate"><span class="pre">4</span> <span class="pre">i1</span> <span class="pre">i2</span> <span class="pre">i3</span> <span class="pre">i4</span></code>. The first number (4) indicates that
the mesh is formed by polygons with four sides. The other four numbers mean that
the vertices identified by those four numbers are joined together. For example,
<code class="docutils literal notranslate"><span class="pre">4</span> <span class="pre">0</span> <span class="pre">1</span> <span class="pre">2</span> <span class="pre">3</span></code> means that the <code class="docutils literal notranslate"><span class="pre">coordinates[0]</span></code>, <code class="docutils literal notranslate"><span class="pre">coordinates[1]</span></code>,
<code class="docutils literal notranslate"><span class="pre">coordinates[2]</span></code>, and <code class="docutils literal notranslate"><span class="pre">coordinates[3]</span></code> form a face of the mesh. Then, each
variable is defined as 1D NumPy array with one value for each vertex.</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/logo.png" alt="Logo"/>
            </a></p>
  <div>
    <h3><a href="index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Working with horizons</a><ul>
<li><a class="reference internal" href="#vt-data">VT data</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="cactus_multipoles.html"
                          title="previous chapter">Working with multipolar decompositions</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="cactus_waves.html"
                          title="next chapter">Gravitational waves</a></p>
  </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script><div role="note" aria-label="version link">
  <h3>Versions</h3>
    <ul class="this-page-menu">
      <li><a href="dev/cactus_horizons.html" rel="nofollow"> Development </a></li>
      <li><a href="#" rel="nofollow"> Master </a></li>

      
      <li><a href="1.3.6/cactus_horizons.html" rel="nofollow"> 1.3.6 </a></li>
      
      <li><a href="1.4.0/cactus_horizons.html" rel="nofollow"> 1.4.0 </a></li>
      
      <li><a href="1.4.1/cactus_horizons.html" rel="nofollow"> 1.4.1 </a></li>
      

    </ul>
 </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="cactus_waves.html" title="Gravitational waves"
             >next</a> |</li>
        <li class="right" >
          <a href="cactus_multipoles.html" title="Working with multipolar decompositions"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">kuibit 1.4.0 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Working with horizons</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2020-2023, Gabriele Bozzola.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 6.2.1.
    </div>
  </body>
</html>